# 갤러그 스타일 슈팅 게임 개발 요구사항

## 1. 기술적 요구사항

### 핵심 기술 스택
- **HTML5 Canvas** - 게임 렌더링 엔진
- **JavaScript (ES6+)** - 게임 로직 구현
- **CSS3** - UI 스타일링 및 애니메이션
- **Web Audio API** - 사운드 효과 및 배경음악

### 성능 요구사항
- **프레임레이트**: 60 FPS 일정 유지
- **렌더링**: requestAnimationFrame 활용
- **충돌 감지**: 효율적인 AABB 또는 원형 충돌 감지
- **메모리 관리**: 객체 풀링을 통한 메모리 누수 방지
- **최적화**: 화면 밖 객체 제거, 렌더링 최적화

## 2. 게임 플레이 요구사항

### 플레이어 기능
- **이동**: 좌우 이동 (방향키, A/D키, 또는 터치)
- **공격**: 총알 발사 (스페이스바 또는 터치)
- **생명력**: 기본 3개, 최대 5개까지 증가 가능
- **무적 시간**: 피격 후 2초간 무적 상태
- **속도**: 일정한 이동 속도, 파워업으로 증가 가능

### 적 시스템 (5종류 + 1보스)

#### 1. 기본 적 (Grunt)
- **체력**: 1
- **점수**: 100점
- **이동 패턴**: 직선 하강
- **속도**: 느림
- **공격**: 없음
- **특징**: 가장 기본적인 적, 대량 출현

#### 2. 돌격 적 (Rusher)
- **체력**: 1
- **점수**: 150점
- **이동 패턴**: 빠른 직선 돌진
- **속도**: 매우 빠름
- **공격**: 없음
- **특징**: 빠르게 돌진하여 플레이어를 위협

#### 3. 사격 적 (Shooter)
- **체력**: 2
- **점수**: 200점
- **이동 패턴**: 느린 직선 하강
- **속도**: 느림
- **공격**: 단발 직선 총알 발사 (2초 간격)
- **특징**: 플레이어 방향으로 총알 발사

#### 4. 지그재그 적 (Zigzag)
- **체력**: 1
- **점수**: 250점
- **이동 패턴**: 좌우 지그재그 이동
- **속도**: 보통
- **공격**: 없음
- **특징**: 예측하기 어려운 이동으로 회피 어려움

#### 5. 중형 적 (Heavy)
- **체력**: 5
- **점수**: 500점
- **이동 패턴**: 느린 직선 하강
- **속도**: 매우 느림
- **공격**: 3방향 산탄 총알 발사 (3초 간격)
- **특징**: 높은 체력과 강한 화력

#### 6. 보스 (Boss)
- **체력**: 50
- **점수**: 5000점
- **이동 패턴**: 화면 상단에서 좌우 이동
- **속도**: 느림
- **공격 패턴**:
  - 페이즈 1: 5방향 산탄 (2초 간격)
  - 페이즈 2: 원형 탄막 (1.5초 간격)
  - 페이즈 3: 레이저 공격 (5초마다 3초간 지속)
- **특징**: 다단계 공격 패턴, 체력 구간별 패턴 변화

### 파워업 시스템
- **연사력 증가**: 발사 간격 50% 단축
- **다중 총알**: 2발 → 3발 동시 발사
- **관통 총알**: 적을 관통하는 총알
- **쉴드**: 3회 피격 무효화
- **점수 배율**: 30초간 점수 2배
- **생명력 회복**: 생명력 1개 추가

## 3. 게임 시스템 요구사항

### 스테이지 구성
- **스테이지 수**: 총 10스테이지
- **스테이지 구조**: 
  - 일반 적 웨이브 (3-5 웨이브)
  - 보스 전투 (매 5스테이지마다)
- **난이도 증가**:
  - 적 출현 빈도 증가
  - 적 이동 속도 증가
  - 적 공격 빈도 증가
- **클리어 조건**: 모든 적 처치

### 점수 시스템
- **기본 점수**: 적 종류별 고정 점수
- **콤보 시스템**: 연속 처치시 점수 배율 (최대 5배)
- **보너스 점수**: 
  - 무피해 스테이지 클리어: +1000점
  - 빠른 클리어: 시간당 +10점
- **하이스코어**: localStorage를 통한 최고점수 저장

### 게임 상태 관리
- **게임 상태**: MENU, PLAYING, PAUSED, GAME_OVER, STAGE_CLEAR
- **일시정지**: ESC키 또는 P키
- **재시작**: 게임 오버 후 R키
- **설정**: 사운드 ON/OFF, 조작키 변경

## 4. UI/UX 요구사항

### HUD (게임 화면)
- **점수 표시**: 화면 상단 좌측
- **생명력**: 화면 상단 우측 (하트 아이콘)
- **스테이지**: 화면 상단 중앙
- **보스 체력바**: 보스 출현시 화면 상단
- **파워업 상태**: 화면 하단 좌측 아이콘

### 메뉴 시스템
- **메인 메뉴**: 
  - 게임 시작
  - 하이스코어 확인
  - 설정
  - 조작법 안내
- **일시정지 메뉴**:
  - 게임 계속
  - 메인 메뉴로
  - 재시작
- **게임 오버 화면**:
  - 최종 점수
  - 하이스코어 갱신 여부
  - 재시작/메인 메뉴 선택
- **스테이지 클리어**:
  - 클리어 보너스 점수
  - 다음 스테이지 진행

### 반응형 디자인
- **최소 해상도**: 800x600
- **권장 해상도**: 1024x768
- **종횡비**: 4:3 고정
- **모바일 지원**: 터치 컨트롤 (선택사항)

## 5. 오디오/비주얼 요구사항

### 사운드 효과
- **플레이어**: 총알 발사음, 피격음, 파워업 획득음
- **적**: 격파음, 보스 공격음
- **시스템**: 메뉴 선택음, 게임 오버음, 스테이지 클리어음
- **배경음악**: 
  - 메인 메뉴 BGM
  - 일반 스테이지 BGM (2-3곡 순환)
  - 보스 전투 BGM
- **볼륨 조절**: 0-100% 단계별 조절

### 시각 효과
- **폭발 애니메이션**: 적 격파시 파티클 효과
- **총알 트레일**: 총알 이동 궤적 표시
- **화면 효과**:
  - 피격시 화면 진동
  - 보스 등장시 화면 플래시
  - 파워업 획득시 글로우 효과
- **배경**: 
  - 스크롤되는 우주/전장 배경
  - 스테이지별 다른 배경 테마

### 시각적 피드백
- **체력 표시**: 적별 체력바 (중형 적, 보스만)
- **히트 이펙트**: 총알 명중시 임팩트 효과
- **상태 표시**: 파워업 활성화시 플레이어 색상 변화

## 6. 데이터 관리 요구사항

### 로컬 저장소 (localStorage)
- **하이스코어**: 상위 10개 기록
- **게임 설정**: 사운드 볼륨, 조작키 설정
- **통계**: 총 플레이 시간, 적 처치 수

### 게임 밸런스 데이터
```javascript
const GAME_CONFIG = {
  player: {
    speed: 5,
    fireRate: 300, // ms
    maxLives: 5
  },
  enemies: {
    grunt: { hp: 1, speed: 2, score: 100 },
    rusher: { hp: 1, speed: 8, score: 150 },
    shooter: { hp: 2, speed: 1, score: 200, fireRate: 2000 },
    zigzag: { hp: 1, speed: 3, score: 250 },
    heavy: { hp: 5, speed: 0.5, score: 500, fireRate: 3000 },
    boss: { hp: 50, speed: 1, score: 5000 }
  },
  powerups: {
    duration: 30000, // ms
    spawnRate: 0.1 // 10% 확률
  }
};
```

## 7. 코드 구조 요구사항

### 클래스 설계
- **Game**: 게임 메인 루프 및 상태 관리
- **Scene**: 씬 관리 (Menu, Playing, GameOver)
- **Player**: 플레이어 캐릭터
- **Enemy**: 적 기본 클래스 및 상속 클래스들
- **Bullet**: 총알 (플레이어/적 구분)
- **PowerUp**: 파워업 아이템
- **CollisionManager**: 충돌 감지 관리
- **SoundManager**: 사운드 재생 관리
- **UIManager**: UI 렌더링 및 관리

### 파일 구조
```
/src
  /js
    - main.js
    - game.js
    - player.js
    - enemies/
      - enemy.js
      - grunt.js
      - rusher.js
      - shooter.js
      - zigzag.js
      - heavy.js
      - boss.js
    - bullet.js
    - powerup.js
    - collision.js
    - sound.js
    - ui.js
    - config.js
  /css
    - style.css
  /assets
    /images
    /sounds
  - index.html
```

### 모듈 패턴
- ES6 모듈 또는 즉시실행함수(IIFE) 사용
- 각 클래스별 독립적인 파일
- 의존성 명확히 정의
- 전역 변수 최소화

## 8. 성능 최적화 요구사항

### 객체 풀링
- **총알 객체**: 재사용을 위한 풀링
- **적 객체**: 타입별 객체 풀
- **파티클**: 시각 효과용 파티클 풀링

### 렌더링 최적화
- **컬링**: 화면 밖 객체 렌더링 제외
- **레이어링**: 배경, 게임 객체, UI 분리
- **스프라이트 배칭**: 동일한 텍스처 그룹핑

### 메모리 관리
- **가비지 컬렉션**: 불필요한 객체 생성 최소화
- **이벤트 리스너**: 적절한 등록/해제
- **타이머**: clearTimeout/clearInterval 관리

## 9. 테스트 요구사항

### 기능 테스트
- 모든 게임 상태 전환 테스트
- 각 적 타입별 행동 패턴 검증
- 충돌 감지 정확성 확인
- 점수 계산 로직 검증

### 성능 테스트
- 다양한 브라우저에서 60 FPS 유지 확인
- 메모리 누수 체크
- 장시간 플레이 안정성 테스트

### 사용성 테스트
- 조작 반응성 확인
- UI 가독성 및 직관성
- 접근성 요구사항 준수

## 10. 배포 요구사항

### 브라우저 지원
- **필수 지원**: Chrome 70+, Firefox 65+, Safari 12+
- **선택 지원**: Edge 79+, Opera 57+
- **모바일**: iOS Safari 12+, Chrome Mobile 70+

### 최적화
- **파일 압축**: CSS/JS 미니파이
- **이미지 최적화**: WebP 지원, 적절한 해상도
- **로딩 최적화**: 리소스 프리로딩

### 접근성
- **키보드 내비게이션**: 모든 메뉴 키보드 접근 가능
- **색상 대비**: WCAG 2.1 AA 기준 준수
- **스크린 리더**: 중요 정보 대체 텍스트 제공

## 11. 확장성 고려사항

### 향후 확장 기능
- **멀티플레이어**: 협동 또는 대전 모드
- **커스텀 스테이지**: 사용자 제작 스테이지
- **업그레이드 시스템**: 영구 업그레이드
- **도전 과제**: 업적 시스템

### 플랫폼 확장
- **PWA**: 오프라인 플레이 지원
- **모바일 앱**: 네이티브 앱 변환 가능성
- **소셜 기능**: 점수 공유, 리더보드

이 요구사항 문서를 기반으로 단계적이고 체계적인 게임 개발이 가능할 것입니다.